#!/usr/bin/env ruby

TESTME_RUNNING = true

if File.exists?("#{Dir.pwd}/.testme")
  load "#{Dir.pwd}/.testme"
else
  require "testme"
end

if ARGV.empty?
  testme do
    Dir["#{Dir.pwd}/#{TESTME_DIR}/**/*.rb"].each{|f| load f } 
  end

else
  ARGV.each do |arg|
    @file = "#{Dir.pwd}/#{arg}"

    # Check if directory
    if File.directory? @file
      Dir["#{@file}/**/*.rb"].each{|f| load f } 
    elsif File.exists? @file
      if @file.include? '.test.rb'
        testme do
          load @file
        end
      else
        require @file
      end
    end
  end

end
